{% extends "default_internal.twig" %}

{% block content %}
<div class="container-fluid">
    <h1>Bem vindo, {{ username }}</h1>
    <p class="badge badge-success">Dinheiro disponível: R${{wallet}}</p>
    <div class="row align-items-center">
        <div class="col">
            <div id="chart"><!-- Plotly chart will be drawn inside this DIV --></div>
        </div>

    </div>
    <div class="col-md text-right"> 
        <button type="button"  class="btn btn-success"  data-toggle="modal" data-target="#modal-money">
          <i class="fa fa-hand-holding-usd"></i> Depositar dinheiro
      </button>
  </div>
</div>
<div class="modal fade"  tabindex="-1"  role="dialog" id="modal-money">
  <div class="modal-dialog" role="document">
    <div class="modal-content" style="overflow: auto; height:500px">
      <div class="modal-header">
        <h5 class="modal-title">Déposito</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
      </button>
  </div>
  <div class="modal-body">
    <form method="post" action="internal/money" spellcheck="false">
        <div class="form-group">
            <label for="user_wallet">Valor:</label>
            <input type="number" class="form-control" name="user_wallet" id="money" placeholder="Digite o valor" required>
        </div>

        <div class="form-group">
            <label for="user_pass">Confirmar senha:</label>
            <input type="password" class="form-control" name="user_pass" placeholder="*******" required>
        </div>
        <button type="submit" class="btn btn-primary">DEPOSITAR</button> 
    </form> 
</div>
</div>
</div>
</div>
{% endblock %}

{% block scripts %}
<script>
    var data = [
    {
        values: [
        {{ graph1['wallet'] }}, {{ graph1['bought'] }}
        ],
        labels: [
        'Valor em Carteira', 'Valor em Ativos'
        ],
        domain: {
            column: 0
        },
        name: 'Carteira',
        hoverinfo: 'label',
        hole: .8,
        type: 'pie'
    }
    ];

    var layout = {
        title: '',
        grid: {
            rows: 1
        },
        showlegend: false,
    };

    Plotly.newPlot('chart', data, layout, {showSendToCloud: true});

    $('#money').mask("#.##0,00", {reverse: true});
</script>
{% endblock %}
