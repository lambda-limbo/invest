CREATE SCHEMA IF NOT EXISTS `INVEST_DATABASE` DEFAULT CHARACTER SET utf8;
USE `INVEST_DATABASE`;


CREATE TABLE IF NOT EXISTS `INVEST_DATABASE`.`TB_COMPANY` (
  `COMPANY_PK` INT(11) NOT NULL AUTO INCREMENT,
  `COMPANY_NAME` VARCHAR(100) NOT NULL,
  `COMPANY_INFO` VARCHAR(1000) NOT NULL,
  `COMPANY_SYMBOL` CHAR(10) NOT NULL,
  PRIMARY KEY (`COMPANY_PK`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


CREATE TABLE IF NOT EXISTS `INVEST_DATABASE`.`TB_COMPANY_HISTORY` (
  `COMPANY_HISTORY_PK` INT(11) NOT NULL,
  `COMPANY_HISTORY_MINIMIUM` DOUBLE NOT NULL,
  `COMPANY_HISTORY_MAXIMIUM` DOUBLE NOT NULL,
  `COMPANY_PK` INT(11) NOT NULL,
  `COMPANY_HISTORY_DATE` DATE NOT NULL,
  `COMPANY_HISTORY_OPENING_VALUE` DOUBLE NOT NULL,
  `COMPANY_HISTORY_CLOSE_VALUE` DOUBLE NOT NULL,
  PRIMARY KEY (`COMPANY_HISTORY_PK`, `COMPANY_PK`),
  CONSTRAINT `fk_TB_COMPANY_HISTORIC_TB_COMPANY1`
    FOREIGN KEY (`COMPANY_PK`)
    REFERENCES `INVEST_DATABASE`.`TB_COMPANY` (`COMPANY_PK`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


CREATE TABLE IF NOT EXISTS `INVEST_DATABASE`.`TB_STOCK` (
  `STOCK_MINIMIUM` DOUBLE NOT NULL,
  `STOCK_MAXIMUN` DOUBLE NOT NULL,
  `STOCK_OPENING` DOUBLE NOT NULL,
  `STOCK_PK` INT(11) NOT NULL,
  `TB_COMPANY_COMPANY_PK` INT(11) NOT NULL,
  `STOCK_VALUE` DOUBLE NOT NULL,
  `STOCK_CLOSE_VALUE` DOUBLE NULL DEFAULT NULL,
  PRIMARY KEY (`STOCK_PK`),
  CONSTRAINT `fk_TB_STOCK_TB_COMPANY1`
    FOREIGN KEY (`TB_COMPANY_COMPANY_PK`)
    REFERENCES `INVEST_DATABASE`.`TB_COMPANY` (`COMPANY_PK`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


CREATE TABLE IF NOT EXISTS `INVEST_DATABASE`.`TB_USER` (
  `USER_PK` INT(11) NOT NULL,
  `USER_NAME` VARCHAR(100) NOT NULL,
  `USER_WALLET` DOUBLE NOT NULL,
  `USER_PASSWORD` VARCHAR(255) NOT NULL,
  `USER_LOGIN` VARCHAR(20) NOT NULL,
  `USER_CPF` VARCHAR(20) NOT NULL,
  `USER_EMAIL` VARCHAR(50) NOT NULL,
  `USER_DATE_OF_BIRTH` DATE NOT NULL,
  `USER_CELL_PHONE` VARCHAR(20) NOT NULL,
  `USER_ADM` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`USER_PK`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


CREATE TABLE IF NOT EXISTS `INVEST_DATABASE`.`TB_TRANSACTION` (
  `USER_USER_PK_CODE` INT(11) NOT NULL,
  `STOCK_PK` INT(11) NOT NULL,
  `TRANSACTION_DATE` DATE NOT NULL,
  `TRANSACTION_TYPE` VARCHAR(45) NOT NULL,
  `TRANSACTION_QUANTITY` INT(11) NOT NULL,
  `TRANSACTION_TOTAL` DOUBLE NULL DEFAULT NULL,
  PRIMARY KEY (`USER_USER_PK_CODE`, `STOCK_PK`),
  CONSTRAINT `fk_TB_USER_has_TB_STOCK_TB_STOCK1`
    FOREIGN KEY (`STOCK_PK`)
    REFERENCES `INVEST_DATABASE`.`TB_STOCK` (`STOCK_PK`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TB_USER_has_TB_STOCK_TB_USER1`
    FOREIGN KEY (`USER_USER_PK_CODE`)
    REFERENCES `INVEST_DATABASE`.`TB_USER` (`USER_PK`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;